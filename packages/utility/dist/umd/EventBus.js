!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("EventBus",[],t):"object"==typeof exports?exports.EventBus=t():e.EventBus=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r){e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){return function(e){if(Array.isArray(e)){return o(e)}}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]){return Array.from(e)}}(e)||function(e,t){if(!e){return}if("string"==typeof e){return o(e,t)}var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r){return Array.from(e)}if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)){return o(e,t)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++){n[r]=e[r]}return n}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e){return e}var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o)){return o}throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}e.r(t),e.d(t,{EventBus:()=>c,_eventBus:()=>l,default:()=>f,eventBus:()=>f});var u={},c=function(){return e=function e(){!function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}(this,e),u={}},t=[{key:"on",value:function(e,t){this.registerListener(e,t)}},{key:"once",value:function(e,t){this.registerListener(e,t,1)}},{key:"exactly",value:function(e,t,r){this.registerListener(e,t,r)}},{key:"off",value:function(e){delete u[e]}},{key:"detach",value:function(e,t){var r=(u[e]||[]).filter((function(e){return e.callback!==t}));return e in u&&(u[e]=r,!0)}},{key:"emit",value:function(e){for(var t=this,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++){o[i-1]=arguments[i]}var a=[],c=null,l=this.extractContextFromArgs(o),f=l[0];if(o=l[1],this.hasListener(e)){a=u[e]}else if(e.includes("*")){(c=this.patternSearch(e,Object.keys(u))).length>0&&c.forEach((function(e){a=a.concat(u[e])}))}else{for(var s in u){s.includes("*")&&(c=this.patternSearch(s,[e]))&&(a=a.concat(u[s]))}}a.forEach((function(r,i){var c=r.callback;f&&(c=c.bind(f)),void 0!==r.triggerCapacity&&(r.triggerCapacity--,a[i].triggerCapacity=r.triggerCapacity),t.checkToRemoveListener(r)&&u[e].splice(i,1),c.apply(void 0,n(o))}))}},{key:"patternSearch",value:function(e,t){var r,n=new RegExp(this.setWildCardString(e),"g");return 0===(r=t.filter((function(e){return n.test(e)}))).length?null:r}},{key:"setWildCardString",value:function(e){var t=e.replace(/([.+?^${}()|\[\]\/\\])/g,"\\$&");return t=t.replace(/\*/g,"(.*?)"),"^".concat(t)}},{key:"extractContextFromArgs",value:function(e){for(var t=null,n=0;n<e.length;n++){var o=e[n];if(o&&"object"===r(o)&&o.hasOwnProperty("__context")){t=o.__context,e.splice(n,1);break}}return[t,e]}},{key:"registerListener",value:function(e,t,r){this.hasListener(e)||(u[e]=[]),u[e].push({callback:t,triggerCapacity:r})}},{key:"checkToRemoveListener",value:function(e){return void 0!==e.triggerCapacity&&e.triggerCapacity<=0}},{key:"hasListener",value:function(e){return e in u}},{key:"global",value:function(){return l()}}],t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();function l(){return"undefined"!=typeof window?(window.eventBus||(window.eventBus=new c),window.eventBus):"undefined"!=typeof global?(global.eventBus||(global.eventBus=new c),global.eventBus):new c}function f(){return new c}return t})()));