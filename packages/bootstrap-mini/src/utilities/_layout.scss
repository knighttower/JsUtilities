@use "sass:list";

// =========================================
// --> Bring only the require for a layout
$sparkUtil: (
    "border-style": (
        property: border-style,
        class: "-",
        values: (
            dashed: dashed,
            dotted: dotted,
            none: none,
            solid: solid,
        ),
    ),
);

$sparkOptionalUtils: (
    margin:
        mapMerge(
            map-get-multiple(
                $utilities,
                ("margin", "margin-bottom", "margin-top", "margin-x", "margin-y")
            ),
            (
                "margin-right": (
                    responsive: true,
                    property: margin-right,
                    class: mr,
                    values:
                        map-merge(
                            $spacers,
                            (
                                auto: auto,
                            )
                        ),
                ),
                "margin-left": (
                    responsive: true,
                    property: margin-left,
                    class: ml,
                    values:
                        map-merge(
                            $spacers,
                            (
                                auto: auto,
                            )
                        ),
                ),
            )
        ),
    padding:
        mapMerge(
            map-get-multiple(
                $utilities,
                ("padding", "padding-bottom", "padding-top", "padding-x", "padding-y")
            ),
            (
                "padding-right": (
                    responsive: true,
                    property: padding-right,
                    class: pr,
                    values: $spacers,
                ),
                "padding-left": (
                    responsive: true,
                    property: padding-left,
                    class: pl,
                    values: $spacers,
                ),
            )
        ),
    width: (
        "width-percent": (
            responsive: true,
            property: width,
            class: w,
            values: $percentSizes,
        ),
    ),
    height: (
        "height-percent": (
            responsive: true,
            property: height,
            class: h,
            values:
                map-merge(
                    $percentSizes,
                    (
                        vh: 100vh,
                    )
                ),
        ),
    ),
    z-index: (
        "z-index": (
            property: z-index,
            class: z,
            values: $zIndex,
        ),
    ),
    flex:
        map-get-multiple(
            $utilities,
            (
                "align-content",
                "align-items",
                "align-self",
                "flex",
                "flex-direction",
                "flex-grow",
                "flex-shrink",
                "flex-wrap",
                "justify-content",
                "order"
            )
        ),
    float: (
        "float": (
            responsive: true,
            property: float,
            values: (
                left: left,
                right: right,
                none: none,
            ),
        ),
    ),
    position: map-get-multiple($utilities, ("position")),
    display: map-get-multiple($utilities, ("display")),
    visibility: map-get-multiple($utilities, ("visibility")),
);

// -----------------------------------------
// Remap to correct or override the utilities
@each $key, $value in $miniUtilsMapping {
    @if $value {
        $sparkUtil: map-merge($sparkUtil, map-get($sparkOptionalUtils, $key));
    }
}

// -----------------------------------------
// Start building the classes
$targetBreakpoints: map-get-multiple($sparkBreakpoints, $screenSizes);
$responsiveClasses: ();

// produce the standard utility classes
@each $key, $value in $sparkUtil {
    @include generate-utility($value);

    @if (type-of($value) == "map") {
        @if (map-get($value, responsive)) {
            $responsiveClasses: append($responsiveClasses, $value);
        }
    }
}

// produce the responsive utility classes
@if length($responsiveClasses) > 0 {
    @each $breakpoint in map-keys($targetBreakpoints) {
        $suffix: -#{$breakpoint};
        @include breakpoint($breakpoint) {
            @each $value in $responsiveClasses {
                @include generate-utility($value, $suffix);
            }
        }
    }
}

.container,
.container-fluid {
    --bs-gutter-x: 1.5rem;
    --bs-gutter-y: 0;
    width: 100%;
    padding-right: calc(var(--bs-gutter-x) * 0.5);
    padding-left: calc(var(--bs-gutter-x) * 0.5);
    margin-right: auto;
    margin-left: auto;
}

:root {
    --bs-max-width-xs: 540px;
    --bs-max-width-sm: 720px;
    --bs-max-width-md: 960px;
    --bs-max-width-lg: 1140px;
    --bs-max-width-xl: 1320px;
    --bs-max-width-xxl: 1400px;
}
.container-fluid {
    max-width: 100%;
}
@media (min-width: 0) {
    .container {
        max-width: var(--bs-max-width-xs);
    }
}
@media (min-width: 576px) {
    .container {
        max-width: var(--bs-max-width-sm);
    }
}
@media (min-width: 768px) {
    .container {
        max-width: var(--bs-max-width-md);
    }
}
@media (min-width: 992px) {
    .container {
        max-width: var(--bs-max-width-lg);
    }
}
@media (min-width: 1200px) {
    .container {
        max-width: var(--bs-max-width-xl);
    }
}
@media (min-width: 1400px) {
    .container {
        max-width: var(--bs-max-width-xxl);
    }
}

// =========================================
// --> Font Sizes
// --------------------------
:root {
    --x-base-font-size: 1;
    --x-base-line-height: 1.5;
    --x-font-size: 15px;
    --x-base-div-width: 1040;
    --input-height: 40px;
}
// TABLETS
@include breakpoint(tablet) {
    :root {
        --x-base-font-size: 0.85;
        --x-base-div-width: 740;
    }
}
// MOBILES UNDER 600PX;
@include breakpoint(mobile) {
    :root {
        --x-base-font-size: 0.75;
        --x-base-div-width: 360;
    }
}

.spacer {
    display: block;
    &.--100 {
        height: calc(100px / var(--x-base-font-size));
    }
    &.--90 {
        height: calc(90px / var(--x-base-font-size));
    }
    &.--80 {
        height: calc(80px / var(--x-base-font-size));
    }
    &.--70 {
        height: calc(70px / var(--x-base-font-size));
    }
    &.--60 {
        height: calc(60px / var(--x-base-font-size));
    }
    &.--50 {
        height: calc(50px / var(--x-base-font-size));
    }
    &.--40 {
        height: calc(40px / var(--x-base-font-size));
    }
    &.--30 {
        height: calc(30px / var(--x-base-font-size));
    }
    &.--20 {
        height: calc(20px / var(--x-base-font-size));
    }
    &.--10 {
        height: calc(10px / var(--x-base-font-size));
    }
    &.--5 {
        height: calc(10px / var(--x-base-font-size));
    }
}
